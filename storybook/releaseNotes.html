
<!DOCTYPE html>
<html>
	<head>
		<title>PBS Storybook Engine Release Notes</title>
		
		<meta name = "viewport" content = "user-scalable=no, width=960">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		
		<style type="text/css">
			*{margin:0;padding:0;-webkit-tap-highlight-color:rgba(0,0,0,0);}
			body{background-color:#ffffff;margin:40px;}
			p{margin:20px 0;}
			h1{margin:20px 0 50px 0;}
			h2{margin:10px 0 20px 0; padding-top:15px; border-top:1px #000000 solid;}
			h3{}
			ul{list-style-position: inside;margin:20px 0;}
			dl{list-style-position: inside;margin:20px 0;}
			dt{font-weight:bold;}
			dd{margin: 10px 0;}
			.content{margin-left:20px;}
		</style>
   
	</head>
 
	<body>
	
	<h1>PBS Storybook Engine Release Notes</h1>
	
	<h2>RC2 0.024</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>N/A</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>N/A</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>N/A</p>
		</div>
	</article>
	
	<h2>RC2 0.023</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>Book now dispatches <var>STARTED</var> and <var>LOADED</var> events.</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>N/A</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>Fixed an issue where pages were blank for a moment when first navigating to them</p>
			<p>Fixed an issue where the left page sound was playing twice instead of the the left page sound followed by the right page sound</p>
			<p>Fixed an issue where sprites put two duplicate class names identifying the sprite.</p>
		</div>
	</article>
	
	<h2>RC2 0.022</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>N/A</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>Added a delay to single-page layout when navigating so the page will wait a moment after the page turn starts to move the book into its new position.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>N/A</p>
		</div>
	</article>
	
	<h2>RC2 0.021</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>Pages now have a class name of "loud" when playing a page sound and "quiet" otherwise.</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>Set the <var>dirty</var> property of a sprite when changing its visibility in the cycle method of cycler.js.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>Fixed an issue where a cycler would not clear when its children where sprites with only one frame.</p>
			<p>The audio player was not being passed into the cover and causing audio not to play on the cover.</p>
			<p>Fixed an issue where the cycler would not start paused even if the <var>autoStart</var> was false.</p>
			<p>Reset cyclers on page <var>navigationToBegin</var> event instead of after the page was flipped.</p>
		</div>
	</article>
	
	<h2>Beta 0.020</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>Added a <var>margin</var> property to the configuration object's <var>book</var> property which makes the margin outside the book public. This property is a percentage of the viewport.</p>
			<p>The next and previous page buttons are no longer required.</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>Added "overflow-y: hidden" to "pbsPagesContainer".</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>Fixed an issue where setting the enabled property of the book audio to false was not working.</p>
		</div>
	</article>
	
	<h2>Beta 0.019</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>Page elements now have additional class names so they can be more easily styled.</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>New page elements class names are in the form "pbsPage(Page Number)(Page Element Name)(Element Number)". For example the second Text Area element on page 23 would have class name: "pbsPage23TextArea2". Note: the element number is one-based.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>Dragging outside of drawing pad no longer stops the drawing on mobile.</p>
			<p>Drawing Pad now works on Android.</p>
		</div>
	</article>

	<h2>Beta 0.018</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>Drawing pad now supports buttons which change color, clear the canvas and change to the eraser tool.</p>
			<p>Drawing pad now supports texture and overlay images.</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>Added <var>pageSlideDuration</var> property to the available book properties which defines the time (in milliseconds) it takes to transition between open pages.</p>
			<p>The following files updated to support new drawing pad features: book.js, page.js, drawingPad.js.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>Fixed a bug where storybook with no go past loading screen because the <var>canPlayThrough</var> event was not firing by adding the load start event to <var>canPlay</var> event.</p>
		</div>
	</article>
	
	<h2>Beta 0.017</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>Play sound on touch/click is now supported.</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>Added audible.js with a <var>makeAudible</var> function which will add the ability to add play a sound on touch or click.</p>
			<p>Updated page.js so page elements will be made audible if a sound object is specified on the element in the config.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>N/A</p>
		</div>
	</article>
	
	<h2>Beta 0.016</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>Page turn animations are now supported. (This can be turned off by setting the "pageTurnDuration" on the book object in the config to "0").</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>Page turn duration can be set in the book config under the "pageTurnDuration" property.</p>
			<p>The following CSS was added to support page turning: pbsPageTurnContainer, pbsPageTurnPageContainer, pbsRightPageTurnGradient and pbsLeftPageTurnGradient.</p>
			<p>Moved a couple utility functions from view.js to pbs.js: <var>getNumberFromString</var> and <var>isInPixelUnits</var>.</p>
			<p>Added a new utlity function <var>isInPercentageUnits</var> which will return true if the string has a "%" symbol present.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>Fixed a bug where the cover was not zoomed correctly on iPhone 5.</p>
			<p>Fixed a bug where if a sprite x and y position was set to zero then the sprite would be positioned off screen.</p>
		</div>
	</article>
	
	<h2>Beta 0.015</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>N/A</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>The <var>audioLoadedEnough</var> is now used in the <var>audioLoaded</var> function to prevent the main loop to be invoked multiple times.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>Pressing a navigation button causing the main loop to be started more than once has been prevented by </p>
			<p>Updated the font declaration in the fonts.css of the example storybook to include *.eot and *.woff of one of the fonts that was not showing up in IE9.</p>
		</div>
	</article>
	
	<h2>Beta 0.014</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>Page sounds can now be set in the configuration file.</p>
			<p>Page sounds now support looping.</p>
			<p>In two-page layout the right page will play after the left page sound is complete.</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>Code was added to book.js to add images found in the content array of the cover to the resource loader.</p>
			<p>Moved code for creating resource objects from url keys in the config to a new function <var>createResources</var> in book.js.</p>
			<p>Page.js and book.js were updated to support sounds.</p>
			<p>AudioPlayer.js was added to support sounds.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>Cover now supports sprites in content array.</p>
		</div>
	</article>
	
	<h2>Beta 0.013</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>Book now supports fit to container height.</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>Updated <var>updateLayout</var> and <var>updatePosition</var> in book.js to support scaling the book in both width and height.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>N/A</p>
		</div>
	</article>
	
	<h2>Beta 0.012</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>Pages now have unique ids on their containers.</p>
			<p>The space between paragraphs in a Text Area can now be specified with the <var>paragraphSpacing</var> property.</p>
			<p>Cyclers are now supported.</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>Added id attribute to all page's section element (e.g. id="pbsPage17"). Note the cover will have a page number of zero (e.g. id="pbsPage0").</p>
			<p>Updated textArea.js so the margin-bottom of a paragraph will be set to the <var>paragraphSpacing</var> property if it exists and if there are multiple paragraphs.</p>
			<p>Added cycler.js which allows for a "Cycler" to be added in the configuration.</p>
			<p>Updated <var>init</var> and <var>navigationToComplete</var> methods of page.js to support Cyclers.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>N/A</p>
		</div>
	</article>
	
	<h2>Alpha 0.011</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>Sprites now support "EaseIn" and "EaseOut" via the <var>easing</var> property in the config.</p>
			<p>Sprite positions can now be specified in pixels (e.g. x: "100px") in the config.</p>
			<p>Text Area positions can now be specified in pixels (e.g. x: "100px") in the config.</p>
			<p>Text Area widths can now be specified in pixels (e.g. x: "100px") in the config.</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>Moved the engine CSS and JavaScript folders into a new "engine" folder.</p>
			<p>Refactored the update method of sprite.js to use a new <var>updateIndex</var> variable for tracking the current progress of the animation.</p>
			<p>Added a private <var>applyEasing</var> function to add support for easing animations in and out.</p>
			<p>Added regular expressions to sprite.js and textArea.js to determine of x and y values specified in the config with "px" and set the location of the sprite to a percentage based on the parent dimensions.</p>
			<p>Removed the clearRect method from the render method of sprite.js which crashes native browser in Droid Samsung Gt-P3113.</p>
			<p>Moved logic for setting the positions and size of the element of an page element from sprite.js and textArea.js into view.js which both sprites and text areas inherit from.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>Animations no longer crash in native browser in Droid Samsung Gt-P3113.</p>
		</div>
	</article>
	
	<h2>Alpha 0.010</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>Unsupported HTML tags (everything except b, i and em) are now removed from text areas.</p>
			<p>Custom tags (color, size, font) are now supported in text areas.</p>
			<p>Text Areas can now be assigned multiple paragraphs.</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>Removed the options parameter from the book object since it was not being used.</p>
			<p>Added a css height declaration for the book container in the <var>updateLayout</var> function to extend the book background all the way to the bottom.</p>
			<p>Two functions were added to textArea.js to remove HTML tags except "b", "i", "em" and "br" and support the custom tags: "color", "size" and "font".</p>
			<p>The textArea object now checks the type of the text property in the config. If it is an array then it will put each item into a separate paragraph within the text area div.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>N/A</p>
		</div>
	</article>
	
	<h2>Alpha 0.009</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>Supports an odd number of pages.</p>
			<p>Supports even and odd background definitions (image or color) in the book config.</p>
			<p>Centered the book when closed and showing the cover.</p>
			<p>Page navigation button size can now be set in the book config.</p>
			<p>Storybook container background color or image an now be set in the config.</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>Added logic in the init function in page.js to add a blank page if the number of pages in the config was odd.</p>
			<p>Page.js init function now reads page background properties in the following order: page background image, page background color, odd/even default background image, odd/even default background color, default background image, default image color.</p>
			<p>Renamed storybook.js to book.js.</p>
			<p>Changed namespace from PBS to PBS.KIDS.storybook</p>
			<p>Updated sprite.js so the CSS height of the sprite is set as a percentage of the parent container if  a parent container is specified.</p>
			<p>Added comments throughout the engine js files.</p>
			<p>Book.js init function now sets the background color or image of the bookWrapperElement if the config properties are set.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>Sprites no longer stretch beyond the bounds of the page in the y direction on IE9 and Android 2.3.</p>
		</div>
	</article>
	
	<h2>Alpha 0.008</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>Sprites can now be aligned left, right, top, and bottom by setting the <var>horizontalAlign</var> and <var>verticalAlign</var> properties of the sprite in the config.</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>Changed the storybook engine css filename from "style.css" to "engine.css".</p>
			<p>Font scaling now handled by setting the fontSize of the storybookContainerElement element instead of the body element.</p>
			<p>Sprite.js now reads in the <var>horizontalAlign</var> and <var>verticalAlign</var> properties through the options parameter and sets private variables with the same names. If the sprite encounters the string "RIGHT" the x value will be set to the CSS right property to x, otherwise x will be set to the CSS left property. If the sprite encounters the string "BOTTOM" the x value will be set to the CSS bottom property to y, otherwise y will be set to the CSS top property.</p>
			<p>Added a <var>parentElement</var> parameter to the createCanvas utility function.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>Moved the page navigation buttons inside the storybook container instead of the viewport.</p>
		</div>
	</article>
	
	<h2>Alpha 0.007</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>A cover can now be specified in the configuration file.</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>Combined the two "pbsPage" section elements into one element in the markup.</p>
            <p>Added a new variable in storybook.js called <var>cover</var> which will store the cover object. The cover is a PBS.page object. Also added listeners to detect drags to navigate the cover just like a page.</p>
            <p>Changed the function name "windowSizeChange" to "updateLayout" to be better describe its use.</p>
            <p>Removed a call to navigateToPage function inside of <var>updateLayout</var>. It was being called because there were some positioning that was being done when changing pages that also needed to happen when the viewport changed size.  The positioning code was moved into an <var>updatePosition</var> function which can now be invoked by either function.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>N/A</p>
		</div>
	</article>
	
	<h2>Alpha 0.006</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>Page backgrounds can now be set to a color instead of an image.</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>Updated sprite.js so an image is no longer required. If no resource is specified the sprite will draw a rectangle on the canvas with the color specified by the color parameter.</p>
			<p>Updated page.js so the page background will set based on the configuration priorities: page background image, page background color, default page image, default page color.</p>
			<p>Updated the public previousPage method of page.js which was going back the incorrect number of pages based on the page index for landscape orientations.</p>
			<p>Updated markup to link to a css file for fonts so @font-face can be used to point to a ttf and svg version of custom fonts.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>The previous page button now works the first time even if the start page is even (Bug 2).</p>
			<p>Custom fonts now display on iOS (Bug 5).</p>
		</div>
	</article>
	
	<h2>Alpha 0.005</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>Animations on a page will now reset to the first frame when navigating to that page.</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>Removed deprecated pbsController selector in style.css.</p>
			<p>Set the height attribute of pbsPageCanvas to 100% to address bug 1 where canvases were stretching beyond the bounds of the page.</p>
			<p>Setting the contents of the page containers immediately after setting the innerHTML of the containers did not work in IE9 due to a bug. Fixed this by looping through the child nodes of the container removing each child with removeChild. This code can be found in the navigateToPage function of storybook.js.</p>
			<p>Changed the sprite property name from <var>reset</var> to <var>autoReset</var>.</p>
			<p>Added a reset method to sprite.js which causes the sprite to go to the first frame of animation.</p>
			<p>Updated page.js so it will reset all sprites when navigating to a page.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>Page backgrounds no longer stretch beyond the bounds of the page in the y direction on IE9 and Android 2.3. Sprites are still stretching.</p>
			<p>Page contents are no longer empty on IE9.</p>
		</div>
	</article>
    
    <h2>Alpha 0.004</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>Resources are now all loaded from one resource loader which dispatches the load progress.</p>
		</div>
	</article>
	
	<article>
		<h3>Technical</h3>
		
		<div class="content">
			<p>Created resourceLoader.js with two public methods: <var>addToQueue</var> and <var>loadQueue</var>. Updated storybook.js to read in the configuration and convert properties named "url" to resource objects. Also the loadQueue method is invoked via the new public method <var>load</var>.</p>
			<p>Updated page.js and sprite.js to read the <var>autoStart</var> property of a sprite in the configuration file.  Sprites with an autoStart property set to false will no longer autoplay when navigating to a page.</p>
			<p>Updated sprite.js to read the <var>reset</var> property of a sprite in the configuration file. Sprites with a reset property set to true will go to the first frame after an animation is complete.</p>
			
			<p>Updated sprite.js to read the <var>toggleOnPress</var> property of a sprite in the configuration file. Sprites with a toggleOnPress property set to true will pause animation when playing and resume animation when paused. A public <var>resume</var> method was added to support this new property.</p>
			
			<p>Updated the style so the element with the <var>pbsPagesContainer</var> class hides elements outside its width by setting <var>overflow-x</var> to <var>hidden</var>.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>N/A</p>
		</div>
	</article>
    
    <h2>Alpha 0.003</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>Added subtle shadow on pages container.</p>
			<p>Drag will now navigate between pages if drag distance on a single page is long enough. On the two-page layout the drag direction must go toward the center of the book to navigate: This is by design to model a physical book.</p>
			<p>Prevent text selection of Text Areas on drag.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>Page objects y positions are now accurate.</p>
		</div>
	</article>

    <h2>Alpha 0.002</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
			<p>Sprites are now available.</p>
            <p>The game loop will now send updates to the pages allowing for animations.</p>
            <p>Page backgrounds made changed to sprites so they can be animated.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>N/A</p>
		</div>
	</article>
    
    <h2>Alpha 0.001</h2>
	
	<article>
		<h3>New Features</h3>
		
		<div class="content">
        	<p>Text Area objects are now available.</p>
        	<p>Book responds to viewport size changes.</p>
        	<p>Book supports single-page and two-page layout depending on aspect ratio</p>
        	<p>Pages translate when in single-page layout.</p>
            <p>Page backgrounds can be set.</p>
            <p>Configuration files are used to populate page objects.</p>
            <p>Hide URL bar on iPhone and Android.</p>
		</div>
	</article>
	
	<article>
		<h3>Fixed Issues</h3>

		<div class="content">
			<p>N/A</p>
		</div>
	</article>
	
	</body>
</html>